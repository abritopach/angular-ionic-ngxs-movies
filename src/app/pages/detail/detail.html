<ion-header no-border>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Movie Detail</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="outer-content">
  <ion-grid fixed style="height: 100vh">
    <ion-row class="ion-align-items-center" style="height: 100vh">
      <ion-col size-lg="6" offset-lg="3" size-md="10" offset-md="1">
        @if(movie) {
        <ion-card>
          <ion-item lines="none">
            <h2><b>{{ movie?.title }}</b></h2>
            <ion-chip color="tertiary" slot="end">
              @if(movie.genreImage) {
              <ion-img [src]="movie.genreImage" class="genre-image"></ion-img>
              } @else {
              <ion-icon name="pricetag" color="tertiary"></ion-icon>
              }
              <ion-label>{{ movie?.genre }}</ion-label>
            </ion-chip>
          </ion-item>
          <ion-item lines="none" class="poster">
            @if(movie.poster) {
            <img
              [src]="movie?.poster"
              height="300px"
              alt="Movie Poster Detail Page"
            />
            } @else {
            <img
              src="https://in.bmscdn.com/iedb/movies/images/website/poster/large/ela-cheppanu-et00016781-24-03-2017-18-31-40.jpg"
              height="300px"
              alt="Empty Movie Poster Detail Page"
            />
            }
          </ion-item>
          <ion-card-content>
            <ion-item>
              <p>
                <ion-icon name="information-circle-outline"></ion-icon> {{
                movie?.notes }}
              </p>
              <ion-badge tappable slot="end" (click)="watchTrailer()"
                ><ion-icon name="eye"></ion-icon> Trailer</ion-badge
              >
            </ion-item>
            <ion-row>
              @if(movie.cast.length !== 0) {
              <ion-item>
                <p><ion-icon name="people"></ion-icon> {{ movie?.cast }}</p>
                <ion-badge tappable slot="end" (click)="showActors()"
                  ><ion-icon name="eye"></ion-icon> Actors</ion-badge
                >
              </ion-item>
              }
            </ion-row>
          </ion-card-content>
          <ion-row>
            <ion-item style="width: 100%">
              @if(movie.likes) {
              <ion-button small>
                <ion-icon slot="start" name="thumbs-up"></ion-icon>
                {{ movie?.likes }} Likes
              </ion-button>
              } @if(movie.comments) {
              <ion-button small (click)="onClickShowComment()">
                <ion-icon slot="start" name="chatbubble-ellipses"></ion-icon>
                {{ movie?.comments.length }} Comments
              </ion-button>
              }
              <ion-badge color="tertiary" slot="end">
                {{ movie?.year }}
              </ion-badge>
            </ion-item>
          </ion-row>

          <ion-row>
            <ion-col col-auto class="ion-text-left">
              <ion-button
                fill="clear"
                size="small"
                color="primary"
                (click)="onClickLike()"
              >
                <ion-icon name="thumbs-up" slot="start"></ion-icon>
                Like
              </ion-button>
            </ion-col>
            <ion-col col-auto class="ion-text-right">
              <ion-button
                fill="clear"
                size="small"
                color="primary"
                (click)="onClickComment()"
              >
                <ion-icon name="chatbubbles" slot="start"></ion-icon>
                Comment
              </ion-button>
            </ion-col>
            <ion-col col-auto class="ion-text-center">
              <ion-button
                fill="clear"
                size="small"
                color="primary"
                (click)="onClickFavorite()"
              >
                <ion-icon name="heart" slot="start"></ion-icon>
                Favorite
              </ion-button>
            </ion-col>
            <ion-col col-auto class="ion-text-center">
              <ion-button
                fill="clear"
                size="small"
                color="primary"
                (click)="onClickShare()"
              >
                <ion-icon name="share-social" slot="start"></ion-icon>
                Share
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-card>
        }
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer>
  <ion-toolbar color="primary">
    <ion-title>© {{ currentYear }} Adrián Brito Pacheco</ion-title>
    <ion-buttons slot="end">
      <ntkme-github-button
        user="abritopach"
        repo="angular-ionic-ngxs-movies"
      ></ntkme-github-button>
      <ntkme-github-button
        user="abritopach"
        type="follow"
        style="margin-left: 5px"
      ></ntkme-github-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
